version: 2

models:
  - name: servicenow__task_enhanced
    description: '{{ doc("servicenow__task_enhanced") }}'
    columns:
      - name: task_id
        description: '{{ doc("sys_id") }}'
        tests:
          - unique
          - not_null

      - name: is_task_active
        description: '{{ doc("is_task_active") }}'

      - name: activity_due
        description: '{{ doc("activity_due") }}'

      - name: additional_assignee_list
        description: '{{ doc("additional_assignee_list") }}'

      - name: approval
        description: '{{ doc("approval") }}'

      - name: approval_history
        description: '{{ doc("approval_history") }}'

      - name: approval_set
        description: '{{ doc("approval_set") }}'

      - name: assigned_to_link
        description: '{{ doc("assigned_to_link") }}'

      - name: assigned_to_value
        description: '{{ doc("assigned_to_value") }}'

      - name: assignment_group_link
        description: '{{ doc("assignment_group_link") }}'

      - name: assignment_group_value
        description: '{{ doc("assignment_group_value") }}'

      - name: business_duration
        description: '{{ doc("business_duration") }}'

      - name: business_service_link
        description: '{{ doc("business_service_link") }}'

      - name: business_service_value
        description: '{{ doc("business_service_value") }}'

      - name: calendar_duration
        description: '{{ doc("calendar_duration") }}'

      - name: close_notes
        description: '{{ doc("close_notes") }}'

      - name: task_closed_at
        description: '{{ doc("closed_at") }}'

      - name: task_minutes_open_to_close
        description: '{{ doc("task_minutes_open_to_close") }}'

      - name: closed_by_link
        description: '{{ doc("closed_by_link") }}'

      - name: closed_by_value
        description: '{{ doc("closed_by_value") }}'

      - name: comments
        description: '{{ doc("comments") }}'

      - name: comments_and_work_notes
        description: '{{ doc("comments_and_work_notes") }}'

      - name: company_link
        description: '{{ doc("company_link") }}'

      - name: company_value
        description: '{{ doc("company_value") }}'

      - name: company_name
        description: '{{ doc("name") }}'

      - name: contact_type
        description: '{{ doc("contact_type") }}'

      - name: task_description
        description: '{{ doc("task_description") }}'

      - name: task_due_date_at
        description: '{{ doc("task_due_date_at") }}'

      - name: expected_start
        description: '{{ doc("expected_start") }}'

      - name: task_follow_up_at
        description: '{{ doc("task_follow_up_at") }}'

      - name: group_list
        description: '{{ doc("group_list") }}'

      - name: impact
        description: '{{ doc("impact") }}'

      - name: knowledge
        description: '{{ doc("knowledge") }}'

      - name: is_made_sla
        description: '{{ doc("made_sla") }}'

      - name: task_number
        description: '{{ doc("task_number") }}'

      - name: task_opened_at
        description: '{{ doc("task_opened_at") }}'

      - name: opened_by_link
        description: '{{ doc("opened_by_link") }}'

      - name: opened_by_value
        description: '{{ doc("opened_by_value") }}'

      - name: task_order
        description: '{{ doc("task_order") }}'

      - name: parent_link
        description: '{{ doc("parent_link") }}'

      - name: parent_value
        description: '{{ doc("parent_value") }}'

      - name: priority
        description: '{{ doc("priority") }}'

      - name: reassignment_count
        description: '{{ doc("reassignment_count") }}'

      - name: route_reason
        description: '{{ doc("route_reason") }}'

      - name: short_description
        description: '{{ doc("short_description") }}'

      - name: sla_due
        description: '{{ doc("sla_due") }}'

      - name: task_state
        description: '{{ doc("task_state") }}'

      - name: sys_class_name
        description: '{{ doc("sys_class_name") }}'

      - name: sys_created_by
        description: '{{ doc("sys_created_by") }}'

      - name: task_created_at
        description: '{{ doc("task_created_at") }}'

      - name: sys_domain_link
        description: '{{ doc("sys_domain_link") }}'

      - name: sys_domain_path
        description: '{{ doc("sys_domain_path") }}'

      - name: sys_domain_value
        description: '{{ doc("sys_domain_value") }}'

      - name: sys_updated_by
        description: '{{ doc("sys_updated_by") }}'

      - name: task_updated_at
        description: '{{ doc("task_updated_at") }}'

      - name: task_updated_date
        description: '{{ doc("task_updated_date") }}'

      - name: task_effective_number
        description: '{{ doc("task_effective_number") }}'

      - name: upon_approval
        description: '{{ doc("upon_approval") }}'

      - name: upon_reject
        description: '{{ doc("upon_reject") }}'

      - name: urgency
        description: '{{ doc("urgency") }}'

      - name: watch_list
        description: '{{ doc("watch_list") }}'

      - name: work_end
        description: '{{ doc("work_end") }}'

      - name: work_notes
        description: '{{ doc("work_notes") }}'

      - name: work_notes_list
        description: '{{ doc("work_notes_list") }}'

      - name: work_start
        description: '{{ doc("work_start") }}'

      - name: business_duration
        description: '{{ doc("business_duration") }}'

      - name: sys_created_by
        description: '{{ doc("sys_created_by") }}'

      - name: sys_updated_by
        description: '{{ doc("sys_updated_by") }}'

      - name: sys_class_name
        description: '{{ doc("sys_class_name") }}'

      - name: problem_category
        description: '{{ doc("problem_category") }}'

      - name: cause_notes
        description: '{{ doc("cause_notes") }}'

      - name: problem_confirmed_at
        description: '{{ doc("problem_confirmed_at") }}'

      - name: problem_confirmed_by_value
        description: '{{ doc("problem_confirmed_by_value") }}'

      - name: problem_first_reported_by_task_value
        description: '{{ doc("task_value") }}'

      - name: problem_fix_at
        description: '{{ doc("problem_fix_at") }}'

      - name: problem_fix_by_value
        description: '{{ doc("problem_fix_by_value") }}'

      - name: problem_fix_notes
        description: '{{ doc("problem_fix_notes") }}'

      - name: is_major_problem
        description: '{{ doc("is_major_problem") }}'

      - name: problem_state
        description: '{{ doc("problem_state") }}'

      - name: problem_related_incidents
        description: '{{ doc("problem_related_incidents") }}'

      - name: problem_resolution_code
        description: '{{ doc("problem_resolution_code") }}'

      - name: problem_resolved_at
        description: '{{ doc("problem_resolved_at") }}'

      - name: problem_resolved_by_value
        description: '{{ doc("problem_resolved_by_value") }}'

      - name: problem_subcategory
        description: '{{ doc("problem_subcategory") }}'

      - name: problem_created_at
        description: '{{ doc("problem_created_at") }}'

      - name: problem_updated_at
        description: '{{ doc("problem_updated_at") }}'

      - name: workaround_applied
        description: '{{ doc("workaround_applied") }}'

      - name: problem_task_cause_code
        description: '{{ doc("problem_task_cause_code") }}'

      - name: problem_task_close_code
        description: '{{ doc("problem_task_close_code") }}'

      - name: problem_task_type
        description: '{{ doc("problem_task_type") }}'

      - name: problem_task_started_at
        description: '{{ doc("problem_task_started_at") }}'

      - name: started_by_value
        description: '{{ doc("started_by_value") }}'

      - name: change_task_type
        description: '{{ doc("change_task_type") }}'

      - name: change_task_close_code
        description: '{{ doc("change_task_close_code") }}'

      - name: change_task_created_from
        description: '{{ doc("change_task_created_from") }}'

      - name: is_change_on_hold
        description: '{{ doc("is_change_on_hold") }}'

      - name: change_on_hold_reason
        description: '{{ doc("on_hold_reason") }}'

      - name: change_task_planned_end_date
        description: '{{ doc("change_task_planned_end_date") }}'

      - name: change_task_planned_start_date
        description: '{{ doc("change_task_planned_start_date") }}'

      - name: change_request_category
        description: '{{ doc("change_category") }}'

      - name: change_plan
        description: '{{ doc("change_plan") }}'

      - name: change_request_close_code
        description: '{{ doc("close_code") }}'

      - name: change_request_end_date
        description: '{{ doc("end_date") }}'

      - name: change_request_implementation_plan
        description: '{{ doc("change_request_implementation_plan") }}'

      - name: change_request_justification
        description: '{{ doc("change_request_justification") }}'

      - name: is_change_request_on_hold
        description: '{{ doc("is_change_request_on_hold") }}'

      - name: change_request_on_hold_reason
        description: '{{ doc("change_request_on_hold_reason") }}'

      - name: change_request_phase
        description: '{{ doc("change_phase") }}'

      - name: change_request_phase_state
        description: '{{ doc("change_phase_state") }}'

      - name: change_request_reason
        description: '{{ doc("change_reason") }}'
      
      - name: change_requested_by_value
        description: '{{ doc("change_requested_by_value") }}'

      - name: change_requested_by_date
        description: '{{ doc("change_requested_by_date") }}'

      - name: change_request_review_date
        description: '{{ doc("change_request_review_date") }}'

      - name: change_request_review_status
        description: '{{ doc("change_request_review_status") }}'

      - name: change_request_risk
        description: '{{ doc("risk") }}'

      - name: change_request_scope
        description: '{{ doc("scope") }}'

      - name: change_request_start_date
        description: '{{ doc("change_request_start_date") }}'

      - name: change_request_created_at
        description: '{{ doc("created_at") }}'

      - name: change_request_updated_at
        description: '{{ doc("updated_at") }}'

      - name: change_request_test_plan
        description: '{{ doc("change_request_test_plan") }}'

      - name: change_request_type
        description: '{{ doc("change_request_type") }}'

      - name: is_change_request_unauthorized
        description: '{{ doc("is_change_request_unauthorized") }}'

      - name: is_problem_task
        description: '{{ doc("is_problem_task") }}'
      - name: is_change_task
        description: '{{ doc("is_change_task") }}'
      - name: creator_email
        description: '{{ doc("email") }}'
      - name: creator_manager_value
        description: '{{ doc("manager_value") }}'
      - name: creator_department_value
        description: '{{ doc("department_value") }}'
      - name: creator_name
        description: '{{ doc("sys_user_name") }}'
      - name: creator_roles
        description: '{{ doc("roles") }}'
      - name: updater_email
        description: '{{ doc("email") }}'
      - name: updater_manager_value
        description: '{{ doc("manager_value") }}'
      - name: updater_department_value
        description: '{{ doc("department_value") }}'
      - name: updater_name
        description: '{{ doc("sys_user_name") }}'
      - name: updater_roles
        description: '{{ doc("roles") }}'
      - name: opener_manager_value
        description: '{{ doc("manager_value") }}'
      - name: opener_email
        description: '{{ doc("email") }}'
      - name: opener_department_value
        description: '{{ doc("department_value") }}'
      - name: opener_name
        description: '{{ doc("sys_user_name") }}'
      - name: opener_roles
        description: '{{ doc("roles") }}'
      - name: assignee_email
        description: '{{ doc("email") }}'
      - name: assignee_manager_value
        description: '{{ doc("manager_value") }}'
      - name: assignee_department_value
        description: '{{ doc("department_value") }}'
      - name: assignee_name
        description: '{{ doc("sys_user_name") }}'
      - name: assignee_roles
        description: '{{ doc("roles") }}'
      - name: closer_email
        description: '{{ doc("email") }}'
      - name: closer_manager_value
        description: '{{ doc("manager_value") }}'
      - name: closer_department_value
        description: '{{ doc("department_value") }}'
      - name: closer_name
        description: '{{ doc("sys_user_name") }}'
      - name: closer_roles
        description: '{{ doc("roles") }}'
      - name: problem_task_starter_email
        description: '{{ doc("email") }}'
      - name: problem_task_starter_manager_value
        description: '{{ doc("manager_value") }}'
      - name: problem_task_starter_department_value
        description: '{{ doc("department_value") }}'
      - name: problem_task_starter_name
        description: '{{ doc("sys_user_name") }}'
      - name: problem_task_starter_roles
        description: '{{ doc("roles") }}'
      - name: associated_problem_id
        description: '{{ doc("associated_problem_id") }}'
      - name: problem_confirmer_email
        description: '{{ doc("email") }}'
      - name: problem_confirmer_manager_value
        description: '{{ doc("manager_value") }}'
      - name: problem_confirmer_department_value
        description: '{{ doc("department_value") }}'
      - name: problem_confirmer_name
        description: '{{ doc("sys_user_name") }}'
      - name: problem_confirmer_roles
        description: '{{ doc("roles") }}'
      - name: problem_reporter_email
        description: '{{ doc("email") }}'
      - name: problem_reporter_manager_value
        description: '{{ doc("manager_value") }}'
      - name: problem_reporter_department_value
        description: '{{ doc("department_value") }}'
      - name: problem_reporter_name
        description: '{{ doc("sys_user_name") }}'
      - name: problem_reporter_roles
        description: '{{ doc("roles") }}'
      - name: problem_fixer_email
        description: '{{ doc("email") }}'
      - name: problem_fixer_manager_value
        description: '{{ doc("manager_value") }}'
      - name: problem_fixer_department_value
        description: '{{ doc("department_value") }}'
      - name: problem_fixer_name
        description: '{{ doc("sys_user_name") }}'
      - name: problem_fixer_roles
        description: '{{ doc("roles") }}'
      - name: problem_is_known_error
        description: '{{ doc("is_known_error") }}'
      - name: problem_resolver_email
        description: '{{ doc("email") }}'
      - name: problem_resolver_manager_value
        description: '{{ doc("manager_value") }}'
      - name: problem_resolver_department_value
        description: '{{ doc("department_value") }}'
      - name: problem_resolver_name
        description: '{{ doc("sys_user_name") }}'
      - name: problem_resolver_roles
        description: '{{ doc("roles") }}'
      - name: change_requester_email
        description: '{{ doc("email") }}'
      - name: change_requester_manager_value
        description: '{{ doc("manager_value") }}'
      - name: change_requester_department_value
        description: '{{ doc("department_value") }}'
      - name: change_requester_name
        description: '{{ doc("sys_user_name") }}'
      - name: change_requester_roles
        description: '{{ doc("roles") }}'
      - name: associated_change_request_id
        description: '{{ doc("associated_change_request_id") }}'
      - name: cmdb_ci_link
        description: '{{ doc("cmdb_ci_value") }}'
      - name: cmdb_ci_value
        description: '{{ doc("cmdb_ci_value") }}'
      - name: cmdb_ci_name
        description: '{{ doc("cmdb_ci_value") }}'
      - name: assignment_group_name
        description: '{{ doc("cmdb_ci_value") }}'
      - name: business_service_name
        description: '{{ doc("cmdb_ci_value") }}'

  - name: servicenow__activity_summary
    description: '{{ doc("servicenow__activity_summary") }}'
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - task_updated_date
            - task_state
            - priority
            - impact
            - urgency
    columns:
      - name: task_updated_date
        description: '{{ doc("task_updated_date") }}'

      - name: task_state
        description: '{{ doc("task_state") }}'

      - name: priority
        description: '{{ doc("priority") }}'

      - name: impact
        description: '{{ doc("impact") }}' 

      - name: urgency
        description: '{{ doc("urgency") }}'

      - name: total_active_tasks
        description: '{{ doc("total_active_tasks") }}'

      - name: total_active_problem_tasks
        description: '{{ doc("total_active_problem_tasks") }}'

      - name: total_active_change_tasks
        description: '{{ doc("total_active_change_tasks") }}'

      - name: total_associated_problems
        description: '{{ doc("total_associated_problems") }}'

      - name: total_incidents_caused_by_problems
        description: '{{ doc("total_incidents_caused_by_problems") }}'

      - name: total_change_requests
        description: '{{ doc("total_change_requests") }}'

      - name: total_closed_tasks
        description: '{{ doc("total_closed_tasks") }}'

      - name: average_minutes_open_to_close
        description: '{{ doc("average_minutes_open_to_close") }}'

      - name: total_tasks_made_slas
        description: '{{ doc("total_tasks_made_slas") }}'

